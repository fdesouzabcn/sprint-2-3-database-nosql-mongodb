{
  "$jsonSchema": {
    "bsonType": "object",
    "required": [
      "_id",
      "customer_name",
      "email",
      "phone",
      "postcode",
      "registration_date"
    ],
    "properties": {
        "_id": {
            "bsonType": "objectId",
            "description": "Unique identifier for the customer"
        },
        "customer_name": {
            "bsonType": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Full name of the customer"
        },
        "email": {
            "bsonType": "string",
            "description": "Unique email address"
        },
        "phone": {
            "bsonType": "string",
            "maxLength": 20,
            "description": "Phone number (optional country code)"
        },
        "postcode": {
            "bsonType": "string",
            "maxLength": 20,
            "description": "Postal code"
        },
        "registration_date": {
            "bsonType": "date",
            "description": "Date when customer registered"
        },
        "recommended_by_id": {
            "bsonType": ["objectId", "null"],
            "description": "Reference to customer who recommended (null if none)"
        },
        "created_at": {
            "bsonType": "date",
            "description": "Document creation timestamp"
        },
        "updated_at": {
            "bsonType": "date",
            "description": "Document last update timestamp"
        }
    }
  }
}